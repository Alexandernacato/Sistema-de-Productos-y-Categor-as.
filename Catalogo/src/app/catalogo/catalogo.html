<app-nav></app-nav>
<h2> Catálogo de Productos</h2>

<app-products
  [products]="products"
  [searchTerm]="searchTerm"
  (onNuevo)="abrirModalParaNuevo()"
  (onEditar)="abrirModalParaEditar($event)"
  (onEliminar)="eliminarProducto($event)"
></app-products>

<!-- Modal -->
<<!-- Modal -->
<div class="modal-backdrop" *ngIf="mostrarModal">
  <div class="modal">
    <h3 class="modal-title">
      {{ productoSeleccionado.id ? 'Editar Producto' : 'Crear Producto' }}
    </h3>
    <form (ngSubmit)="guardarProducto()" #form="ngForm">
      <div class="form-group">
        <label for="name">Nombre</label>
        <input
          id="name"
          name="name"
          type="text"
          [(ngModel)]="productoSeleccionado.name"
          required
          maxlength="50"
          autofocus
        />
      </div>

      <div class="form-group">
        <label for="description">Descripción</label>
        <textarea
          id="description"
          name="description"
          [(ngModel)]="productoSeleccionado.description"
          required
          maxlength="200"
          rows="3"
        ></textarea>
      </div>

      <div class="form-group">
        <label for="price">Precio</label>
        <input
          id="price"
          name="price"
          type="number"
          [(ngModel)]="productoSeleccionado.price"
          required
          min="0.01"
          step="0.01"
        />
      </div>

      <div class="modal-buttons">
        <button type="submit" [disabled]="form.invalid" class="btn btn-create">
          {{ productoSeleccionado.id ? 'Guardar' : 'Crear' }}
        </button>
        <button type="button" class="btn btn-cancel" (click)="cerrarModal()">
          Cancelar
        </button>
      </div>
    </form>
  </div>
</div>
